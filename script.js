const translations = {
  en: {
    name: "Phạm Tuấn Kha",
    title: "Software engineer",
    objective: "As a Full stack Software Developer with 2 years of experience, I aim to continuously expand my technical expertise and apply modern technologies to build scalable, high-performance, and user-centric web applications. I'm driven to deliver clean, maintainable code and contribute to innovative solutions that create real business value, while also growing towards senior-level responsibilities in system design and team collaboration.",
    objectiveTitle: "Career Objective",
    skillsTitle: "Technical Skills",
    languagesTitle: "Languages",
    expTitle: "Work Experience",
    projectsTitle: "Experience and Projects",
    eduTitle: "Education",
    certTitle: "Certifications",
    print: "Print / Save PDF",
    light: "Light",
    dark: "Dark",
    phoneLabel: "Phone Number:",
    emailLabel: "Email:",
    addressLabel: "Address:",
    languages: [
      "English: TOEIC 700 | Target: IELTS 6.5<br>Intermediate to advanced (Reading documentation, team communication, writing code comments and documentation fluently).",
      "Vietnamese: Native"
    ],
    // Work Experience
    workExperience: {
      role: "Full Stack Developer",
      company: "Automation Tool Development and Maintenance",
      period: "09/2023 - Present",
      responsibilities: [
        "Developed and maintained desktop applications using WPF Framework (.NET 5/6) to support automation workflows in the aviation industry.",
        "Integrated with AWS S3 (data storage), AWS SES (email service), and Microservices architecture for data processing and synchronization.",
        "Built automated test scription using Selenium, NUnit, and MSTest for UI and functional testing.",
        "Involved in the entire SDLC: requirement analysis, system design, development, testing, and delivery.",
        "Ensured maintainable and scalable solutions following SOLID principles, MVVM pattern, and clean architecture practices."
      ]
    },
    // Projects
    projects: {
      project1: {
        name: "Airline Ticket Search & Booking System",
        role: "Full Stack Developer",
        period: "11/2024 - Present",
        responsibilities: [
          "Built a booking platform using <strong>Java 11, Spring Boot, Thymeleaf, and MySQL</strong> for searching and reserving flights.",
          "Integrated with <strong>third-party APIs</strong> for low-cost flight search capabilities.",
          "Designed and optimized relational database schemas for performance and scalability.",
          "Participated in system design, development, writing test cases, code reviews, and bug fixing.",
          "Set up <strong>CI/CD pipelines with GitHub Actions</strong> for automated build and deployment.",
          "Applied <strong>RESTful API design, JSON/XML integrations</strong>, and used <strong>Swagger/Postman</strong> for API testing and documentation."
        ]
      },
      project2: {
        name: "Application Extensions Development",
        role: "Full Stack Developer",
        period: "03/2024 - 07/2024",
        responsibilities: [
          "Developed and maintained <strong>ReactJS + TypeScript</strong> extensions embedded into an existing system.",
          "Built utility applications for data processing, advanced search, display features, and third-party API integrations.",
          "Implemented testing strategy with <strong>Jest (unit tests), integration tests, and Cypress (E2E tests)</strong>.",
          "Optimized frontend performance using <strong>React Hooks, Context API, Redux Toolkit</strong>, and improved build processes with <strong>Webpack/Babel</strong>.",
          "Collaborated in <strong>Agile/Scrum workflow</strong>, actively joining daily standups, sprint planning, and retrospectives."
        ]
      },
      project3: {
        name: "Job Management System (Freelance Project)",
        role: "Full Stack Developer",
        period: "02/2025 - 04/2025",
        responsibilities: [
          "Designed and developed a job management platform using <strong>NestJS (backend)</strong> with <strong>Vue 3 & NuxtJS (frontend)</strong>.",
          "Implemented features for job posting, application management, and candidate tracking.",
          "Integrated <strong>Google Cloud Storage</strong> for file hosting (CVs, images), <strong>AWS SES</strong> for email notifications, and <strong>Twilio SMS API</strong> for user verification.",
          "Containerized the application with <strong>Docker</strong> and established <strong>CI/CD pipelines</strong> for deployment.",
          "Worked closely with clients to analyze requirements, address security challenges, and design scalable solutions."
        ]
      },
      project4: {
        name: "Part-time & Research Projects",
        period: "2024 - Present",
        responsibilities: [
          "Automated workflows such as job postings and advertisement campaigns by integrating <strong>AI services with n8n</strong>.",
          "Provided IT consulting and support for small businesses, delivering customized technical solutions.",
          "Actively participated in seminars and technical forums, researching <strong>AI, Cloud Computing, and Automation Tools</strong> to improve expertise."
        ]
      }
    }
  },
  vi: {
    name: "Phạm Tuấn Kha",
    title: "Kỹ sư Phần mềm",
    objective: "Full stack Software Developer với 2 năm kinh nghiệm, tôi hướng tới việc mở rộng liên tục chuyên môn kỹ thuật và áp dụng các công nghệ hiện đại để xây dựng các ứng dụng có khả năng mở rộng, hiệu suất cao và tập trung vào người dùng. Tôi được thúc đẩy để phát triển mã nguồn sạch, có thể bảo trì và đóng góp vào các giải pháp sáng tạo tạo ra giá trị kinh doanh thực sự, đồng thời phát triển hướng tới các trách nhiệm cấp cao trong thiết kế hệ thống và hợp tác đội nhóm.",
    objectiveTitle: "Mục tiêu nghề nghiệp",
    skillsTitle: "Kỹ năng kỹ thuật",
    languagesTitle: "Ngôn ngữ",
    expTitle: "Kinh nghiệm làm việc",
    projectsTitle: "Kinh nghiệm và Dự án",
    eduTitle: "Học vấn",
    certTitle: "Chứng chỉ",
    print: "In / Lưu PDF",
    light: "Sáng",
    dark: "Tối",
    phoneLabel: "Số điện thoại:",
    emailLabel: "Email:",
    addressLabel: "Địa chỉ:",
    languages: [
      "Tiếng Anh: TOEIC 700 | Mục tiêu: IELTS 6.5<br>Trung cấp đến nâng cao (Đọc tài liệu, giao tiếp nhóm, viết nhận xét mã và tài liệu một cách trôi chảy).",
      "Tiếng Việt: Bản địa"
    ],
    // Work Experience
    workExperience: {
      role: "Full Stack Developer",
      company: "Phát triển và Bảo trì Công cụ Tự động hóa",
      period: "09/2023 - Hiện tại",
      responsibilities: [
        "Phát triển và bảo trì các ứng dụng desktop sử dụng WPF Framework (.NET 5/6) để hỗ trợ quy trình tự động hóa trong ngành hàng không.",
        "Tích hợp với AWS S3 (lưu trữ dữ liệu), AWS SES (dịch vụ email), và kiến trúc Microservices để xử lý và đồng bộ dữ liệu.",
        "Xây dựng các kịch bản kiểm tra tự động sử dụng Selenium, NUnit, và MSTest cho kiểm tra giao diện và chức năng.",
        "Tham gia vào toàn bộ quy trình phát triển: Phân tích yêu cầu, Thiết kế hệ thống, Phát triển, Kiểm thử và bàn gian sản phẩm.",
        "Đảm bảo các giải pháp có thể bảo trì và mở rộng theo các nguyên tắc SOLID, mô hình MVVM và thực hành kiến trúc sạch."
      ]
    },
    // Projects
    projects: {
      project1: {
        name: "Hệ thống Tìm kiếm và Đặt vé Máy bay",
        role: "Full Stack Developer",
        period: "11/2024 - Hiện tại",
        responsibilities: [
          "Xây dựng nền tảng đặt vé sử dụng <strong>Java 11, Spring Boot, Thymeleaf, và MySQL</strong> để tìm kiếm và đặt chỗ các chuyến bay.",
          "Tích hợp với <strong>API bên thứ ba</strong> để tìm kiếm chuyến bay giá rẻ.",
          "Thiết kế và tối ưu hóa lược đồ cơ sở dữ liệu quan hệ cho hiệu suất và khả năng mở rộng.",
          "Tham gia thiết kế hệ thống, phát triển, viết test case, code review và sửa lỗi.",
          "Thiết lập <strong>CI/CD pipelines với GitHub Actions</strong> cho build và deploy tự động.",
          "Áp dụng <strong>thiết kế RESTful API, tích hợp JSON/XML</strong>, và sử dụng <strong>Swagger/Postman</strong> để test và tài liệu hóa API."
        ]
      },
      project2: {
        name: "Phát triển Extension Ứng dụng",
        role: "Full Stack Developer",
        period: "03/2024 - 07/2024",
        responsibilities: [
          "Phát triển và bảo trì extension <strong>ReactJS + TypeScript</strong> được nhúng vào hệ thống hiện có.",
          "Xây dựng các ứng dụng tiện ích cho xử lý dữ liệu, tìm kiếm nâng cao, tính năng hiển thị và tích hợp API bên thứ ba.",
          "Triển khai chiến lược kiểm thử với <strong>Jest (unit test), integration test, và Cypress (E2E test)</strong>.",
          "Tối ưu hóa hiệu suất frontend sử dụng <strong>React Hooks, Context API, Redux Toolkit</strong>, và cải thiện quy trình build với <strong>Webpack/Babel</strong>.",
          "Hợp tác trong <strong>quy trình Agile/Scrum</strong>, tích cực tham gia daily standup, sprint planning và retrospective."
        ]
      },
      project3: {
        name: "Hệ thống Quản lý Việc làm (Dự án Freelance)",
        role: "Full Stack Developer",
        period: "02/2025 - 04/2025",
        responsibilities: [
          "Thiết kế và phát triển nền tảng quản lý việc làm sử dụng <strong>NestJS (backend)</strong> với <strong>Vue 3 & NuxtJS (frontend)</strong>.",
          "Triển khai các tính năng đăng việc làm, quản lý ứng tuyển và theo dõi ứng viên.",
          "Tích hợp <strong>Google Cloud Storage</strong> để lưu trữ file (CV, hình ảnh), <strong>AWS SES</strong> cho thông báo email, và <strong>Twilio SMS API</strong> để xác thực người dùng.",
          "Container hóa ứng dụng với <strong>Docker</strong> và thiết lập <strong>CI/CD pipelines</strong> để triển khai.",
          "Làm việc chặt chẽ với khách hàng để phân tích yêu cầu, giải quyết thách thức bảo mật và thiết kế giải pháp có thể mở rộng."
        ]
      },
      project4: {
        name: "Dự án Bán thời gian & Nghiên cứu",
        period: "2024 - Hiện tại",
        responsibilities: [
          "Tự động hóa quy trình như đăng việc làm và chiến dịch quảng cáo bằng cách tích hợp <strong>dịch vụ AI với n8n</strong>.",
          "Cung cấp tư vấn và hỗ trợ IT cho các doanh nghiệp nhỏ, cung cấp giải pháp kỹ thuật tùy chỉnh.",
          "Tích cực tham gia các hội thảo và diễn đàn kỹ thuật, nghiên cứu <strong>AI, Cloud Computing, và Công cụ Tự động hóa</strong> để nâng cao chuyên môn."
        ]
      }
    }
  }
};

let currentLang = localStorage.getItem("cv_lang") || "en";
let currentTheme = localStorage.getItem("cv_theme") || "light";

function renderLang(lang) {
  const t = translations[lang];
  
  // Update button text
  document.getElementById("langBtn").textContent = lang === "en" ? "VI" : "EN";

  // Update basic info
  document.getElementById("name").textContent = t.name;
  document.getElementById("title").textContent = t.title;
  document.getElementById("objective").textContent = t.objective;
  
  // Update section titles
  document.getElementById("objective-title").textContent = t.objectiveTitle;
  document.getElementById("skill-title").textContent = t.skillsTitle;
  document.getElementById("lang-title").textContent = t.languagesTitle;
  document.getElementById("exp-title").textContent = t.expTitle;
  document.getElementById("projects-title").textContent = t.projectsTitle;
  document.getElementById("edu-title").textContent = t.eduTitle;
  document.getElementById("cert-title").textContent = t.certTitle;
  
  // Update contact labels
  document.getElementById("phone-label").textContent = t.phoneLabel;
  document.getElementById("email-label").textContent = t.emailLabel;
  document.getElementById("loc-label").textContent = t.addressLabel;
  
  // Update button text
  document.getElementById("downloadPdf").textContent = t.print;

  // Update languages section
  const langEl = document.getElementById("languages");
  langEl.innerHTML = "";
  t.languages.forEach(l => {
    let div = document.createElement("div");
    div.innerHTML = l;
    langEl.appendChild(div);
  });

  // Update Work Experience
  const workExp = t.workExperience;
  document.querySelector('.exp-item .role').textContent = workExp.role;
  document.querySelector('.exp-item .company').textContent = workExp.company;
  document.querySelector('.exp-item .date').textContent = workExp.period;
  
  const expList = document.querySelector('#exp1');
  expList.innerHTML = "";
  workExp.responsibilities.forEach(resp => {
    const li = document.createElement("li");
    li.innerHTML = resp;
    expList.appendChild(li);
  });

  // Update Projects
  const projects = t.projects;
  
  // Project 1
  document.querySelector('.project-item:nth-child(1) .project-name').textContent = projects.project1.name;
  document.querySelector('.project-item:nth-child(1) .role').textContent = projects.project1.role;
  document.querySelector('.project-item:nth-child(1) .date').textContent = projects.project1.period;
  const project1List = document.querySelector('.project-item:nth-child(1) ul');
  project1List.innerHTML = "";
  projects.project1.responsibilities.forEach(resp => {
    const li = document.createElement("li");
    li.innerHTML = resp;
    project1List.appendChild(li);
  });

  // Project 2
  document.querySelector('.project-item:nth-child(2) .project-name').textContent = projects.project2.name;
  document.querySelector('.project-item:nth-child(2) .role').textContent = projects.project2.role;
  document.querySelector('.project-item:nth-child(2) .date').textContent = projects.project2.period;
  const project2List = document.querySelector('.project-item:nth-child(2) ul');
  project2List.innerHTML = "";
  projects.project2.responsibilities.forEach(resp => {
    const li = document.createElement("li");
    li.innerHTML = resp;
    project2List.appendChild(li);
  });

  // Project 3
  document.querySelector('.project-item:nth-child(3) .project-name').textContent = projects.project3.name;
  document.querySelector('.project-item:nth-child(3) .role').textContent = projects.project3.role;
  document.querySelector('.project-item:nth-child(3) .date').textContent = projects.project3.period;
  const project3List = document.querySelector('.project-item:nth-child(3) ul');
  project3List.innerHTML = "";
  projects.project3.responsibilities.forEach(resp => {
    const li = document.createElement("li");
    li.innerHTML = resp;
    project3List.appendChild(li);
  });

  // Project 4
  document.querySelector('.project-item:nth-child(4) .project-name').textContent = projects.project4.name;
  document.querySelector('.project-item:nth-child(4) .date').textContent = projects.project4.period;
  const project4List = document.querySelector('.project-item:nth-child(4) ul');
  project4List.innerHTML = "";
  projects.project4.responsibilities.forEach(resp => {
    const li = document.createElement("li");
    li.innerHTML = resp;
    project4List.appendChild(li);
  });

  currentLang = lang;
  localStorage.setItem("cv_lang", lang);
}

function applyTheme(theme) {
  document.documentElement.setAttribute("data-theme", theme);
  document.getElementById("themeBtn").textContent = theme === "dark"
    ? translations[currentLang].light
    : translations[currentLang].dark;
  currentTheme = theme;
  localStorage.setItem("cv_theme", theme);

  // Update version text color based on theme
  const versionEl = document.getElementById("version");
  if (theme === "dark") {
    versionEl.style.color = "#ffffff3d";
  } else {
    versionEl.style.color = "#0000003d";
  }
}

document.getElementById("langBtn").addEventListener("click", () => {
  renderLang(currentLang === "en" ? "vi" : "en");
  applyTheme(currentTheme); // update button text
});
document.getElementById("themeBtn").addEventListener("click", () => {
  applyTheme(currentTheme === "dark" ? "light" : "dark");
});
document.getElementById("downloadPdf").addEventListener("click", () => {
  window.print();
});

renderLang(currentLang);
applyTheme(currentTheme);
